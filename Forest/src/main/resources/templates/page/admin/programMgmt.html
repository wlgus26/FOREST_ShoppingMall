<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">

<th:block th:with="pageName='programMgmt'"></th:block>      
<!-- programMgmt.html 고유 CSS 추가 -->
<th:block layout:fragment="css">
<style>
	.table > th {
		width: 40%;
	}
	
	.ck.cl-editor {
		width: 600px;
		max-width: 650px;
	}
	
	.ck-editor__editable {
		height: 50vh;
	}
	
	.editor img {
		max-width: 650px;
		height: auto;
	}
	
</style>
    <!-- ex)   <link rel="stylesheet" th:href="@{/css/page/programMgmt.css}" >-->
</th:block>
<!-- programMgmt.html 고유 스크립트 추가 -->
<th:block layout:fragment="script">

	 <script th:src="@{/js/ckeditor/ckeditor.js}"></script>
    <!-- ex)  <script th:src="@{/js/page/programMgmt.js}"></script>-->
</th:block>

<!-- Content -->
<div layout:fragment="content">

<form class="container" action="/admin/programMgmt/insert" method="post" th:action="@{/admin/programMgmt/insert}" enctype="multipart/form-data">
<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

<div class="table-div">
	<table class="table">
		<thead>
			<tr class="border-bottom">
				<th scope="col" colspan="2" class="th-custom-style" style="border-bottom-width: 3px; 
				border-bottom-color: #082f1c;
				color: #082f1c;">프로그램등록</th>
			</tr>
		</thead>
		
		<tbody>
			<tr>
				<th scope="row">카테고리</th>
				<td>
					<select id="category" name="category">
						<option value="" selected>-- 선택 --</option>
						<option value="oneday">원데이클래스</option>
						<option value="join">참여형클래스</option>
					</select>
				</td>
			</tr>
			<tr>
				<th scope="row">프로그램명</th>
				<td><input type="text" id="title" name="title"></td>
			</tr>
			<tr>
				<th scope="row">가격</th>
				<td><input type="text" id="price" name="price"></td>
			</tr>
			<tr>
				<th scope="row">위치</th>
				<td><input type="text" id="address" name="address"></td>
			</tr>
			<tr>
				<th scope="row">최대신청인</th>
				<td><input type="text" id="maximum" name="maximum"></td>
			</tr>
			<tr>
				<th scope="row">시작일</th>
				<td><input type="date" id="startDate" name="startDate"></td>
			</tr>
			<tr>
				<th scope="row">종료일</th>
				<td><input type="date" id="expireDate" name="expireDate"></td>
			</tr>
			<tr>
				<th scope="row">내용</th>
				<td><textarea rows="3" cols="100" resize="none" id="content" class="editor" name="content"></textarea></td>
			</tr>
			<tr>
				<th scope="row">썸네일</th>
				<td><input type="file" id="thumb" name="upfile"></td>
			</tr>
			<tr>
				<th></th>
				<td>
					<input type="submit" id="btnInsert" value="등록">
					<input type="reset" id="btnDelete" value="삭제">
					<input type="reset" value="취소">
				</td>
			</tr>
		</tbody>
	</table>
</div>
</form>



<script src="https://ckeditor.com/apps/ckfinder/3.5.0/ckfinder.js"></script>

<script>
	ClassicEditor
	.create(document.querySelector('.editor'))
	.then(editor => {
	    console.log('CKEditor was initialized');
	})
	.catch(error => {
	    console.error(error);
	});
	
	var ckeditor_config = {
			     resize_enable : false,
			     enterMode : CKEDITOR.ENTER_BR,
			     shiftEnterMode : CKEDITOR.ENTER_P,
			     filebrowserUploadUrl : "/admin/productMgmt/ckUpload"
			   };
			   
			   CKEDITOR.replace("content", ckeditor_config);
</script>


<script>
$(document).ready(function() {
    $('#btnInsert').click(function(e) {
        e.preventDefault(); 

        var formData = $('form').serialize();

        $.ajax({
            type: 'POST',
            url: '/admin/programMgmt/insert',
            data: formData,
            success: function(response) {
                console.log(response);
            },
            error: function(error) {
                console.error(error);
            }
        });
    });
</script>








   <h5> templates > page > programMgmt.html > Content </h5>
</div>
</html>