<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">


<th:block th:with="pageName='PageView'"></th:block>      

<th:block layout:fragment="css">
    <!--    <link rel="stylesheet" th:href="@{/css/page/home.css}" >-->
	<style>
	.table > th {
		width: 25%;
	}
	
	.ck.ck-editor {
		width: 600px;
		max-width: 650px;
	}

	.ck-editor__editable {
		height: 50vh;
	}
	
	.editor img {
		max-width: 650px;
		height: auto;
	}
	
	/* 서브메뉴바 */
	.sub-menu1 {
	  background-color: #f0f0f0;
	  /* padding: 1px; */
	  margin-top: 15px;
	}
	
	.sub-menu1 ul {
	  list-style: none;
	  padding: 10px;
	  display: flex; /* Flexbox 사용 */
	  justify-content: space-around; /* 각 항목을 가능한 넓게 펼치기 */
	}
	
	.sub-menu1 li {
	  font-weight: bold;
	}
	
	.sub-menu1 a {
	  flex: 1; /* 너비를 같게 설정 */
	  text-align: center;
	  padding: 1px; /* 내부 여백 설정 */
	  text-decoration: none; /* 링크 밑줄 제거 */
	  color: #333; /* 링크 텍스트 색상 설정 */
	}
	
	.sub-menu1 a:last-child {
	  border-right: none; /* 마지막 항목의 구분선 제거 */
	}
	
	/* 페이지에 맞게 메뉴바 text bold 활성화 */
	.sub-menu1 a.active-menu {
	    font-weight: bold;
	    text-decoration: underline;
	}
	</style>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
 
</th:block>
<!-- view.html 고유 스크립트 추가 -->
<th:block layout:fragment="script">
	<script src="https://kit.fontawesome.com/51db22a717.js" crossorigin="anonymous"></script>
	 
	<!-- Bootstrap JS 및 jQuery -->
	<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</th:block>

<!-- Content -->

<div layout:fragment="content">
<form>
<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />




<div class="container" style="width: 80%">
		
		<div class="row"><h1 class="page-header" style="text-align: center; margin-bottom: 50px;" th:text="${products.no}"></h1>
			<input type="hidden" value="${products.no}" id="productNo">
		</div>
		<div class="row" style="float: left; text-align: center; width:35%;">
			<img th:src="@{/static/upload/product/} + ${products.image}" style="width: 500px; height: 500px; overflow: hidden; object-fit: cover;">
		</div>

		<div class="row productInfo" style="width: 40%;" >
			<div class="form-group" style="text-align: center;">
				<h3 class="page-header" style="text-align: left;" th:text="${products.name}"></h3>
			</div>
			<div class="form-group" style="text-align: left;">
				<label>가격 : </label><span>&nbsp; <fmt:formatNumber th:text="${products.price}" type="number"/></span><span>&nbsp;원</span>
				<input type="hidden" value="${products.price}" id="price">
			</div>
			<div class="form-group" style="text-align: left;">
				<label>배송비 : </label><span>&nbsp;2500원</span>
				<p>도서산간지역 배송비 5000원 / 3만원 이상 결제시 무료배송</p>
			</div>
			
			<!-- 
			<div class="form-group" style="text-align: left;">
				<label>적립금 : </label><span><fmt:parseNumber var="test" value="${productInfo.price / 100}" integerOnly="true"/> ${test}&nbsp;원</span>
			</div>
			 -->
			 
<label for="color">색상 : </label>
<select id="color" name="selectedColor">
    <option selected value="">-------- 선택 --------</option>
    <th:block th:each="detail : ${details}">
        <option th:value="${detail.color}" th:text="${detail.color}"></option>
    </th:block>
</select>


			
		
			        <!-- 
			        <option value="S">S</option>
			         -->
			         
	        
			  
			  
			    

			<div class="form-horizontal" style="text-align: left;">
			    <label for="select_count">구매수량 : </label>
			    <input type="number" class="form-control" id="select_count" name="orderQuantity" min="1">
			</div>
			<hr>
			
			<div class="row">
				<div class="selected_option" style="text-align: right;">
				</div>
				<div style="text-align: center;">
					<button class="btn btn-default" >주문하기</button>
					<button class="btn btn-default" onclick="addToCart()">장바구니</button>
	  		</div>
			</div>
			<hr>	
		</div>
	</div>
</form>	

	
		<br><br><br><br>
		<br><br><br><br>
		<br><br><br><br>
		<br><br><br><br>
		<br><br><br><br>
		<br><br><br><br>
		<!-- With this -->
		<div class="sub-menu1">
		    <ul>
		        <li><a href="#">상품상세</a></li>
		        <li><a href="#">리뷰</a></li>
		        <li><a href="#">상품문의</a></li>
		    </ul>
		</div>






  

</div>
</form>
	
	<!-- CKEditor  -->
	<script src="https://ckeditor.com/apps/ckfinder/3.5.0/ckfinder.js"></script>
	<script>		
	ClassicEditor
	.create(document.querySelector('.editor'))
	.then(editor => {
		console.log('Editor was initialized');
		
		
	})
	.catch(error => {
		console.error(error);
	});
</script>

<!-- 카테고리별로 해당 목록으로 이동  -->
<script>
		function redirectToBoard(type){
			window.location.href = '/products/' + category;
		}
		
		// 모달 창 
		var myModal = document.getElementById('myModal')
		var myInput = document.getElementById('myInput')

		myModal.addEventListener('shown.bs.modal', function () {
		  myInput.focus()
		});
</script>

<script>
    // JavaScript를 사용하여 옵션 동적 생성
    var selectCount = document.getElementById("select_count");
    var productAmount = ${products.amount}; // JSP 표현식을 사용하여 재고 정보 가져오기

    for (var count = 1; count <= productAmount; count++) {
        var option = document.createElement("option");
        option.value = count;
        option.text = count;
        selectCount.appendChild(option);
    }
</script>


<script>
    function addToCart() {
        var productNo = document.getElementById("productNo").value;
        var selectedOpt = document.querySelector(".opt_select").value;
        var orderQuantity = document.getElementById("select_count").value;
        var url = "/myPage/cart?productNo=" + productNo + "&selectedOpt=" + selectedOpt + "&orderQuantity=" + orderQuantity;
        window.location.href = url;
    }
</script>
			

</html>