<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd"> 
  
<mapper namespace="com.hm.forest.admin.model.mapper.AdminMapper">
		<resultMap id="productResultMap" type="Product">
		<id property="no" column="NO"/>
		<result property="category" column="CATEGORY"/>
		<result property="name" column="NAME"/>
		<result property="price" column="PRICE"/>
		<result property="content" column="CONTENT"/>
		<result property="color" column="COLOR"/>
		<result property="amount" column="AMOUNT"/>
		<result property="sizeSml" column="SIZE_SML"/>
		<result property="stock" column="STOCK"/>
		<result property="company" column="COMPANY"/>
		<result property="discountrate" column="DISCOUNTRATE"/>
		<result property="status" column="STATUS"/>
		<result property="image" column="IMAGE"/>
		<result property="wish" column="WISH"/>
	</resultMap>

	<insert id="insertProduct" parameterType="Product">


	  <selectKey resultType="_int" keyProperty="no" order="BEFORE">
	  SELECT SEQ_PD_NO.NEXTVAL FROM DUAL
	  </selectKey>
	
		INSERT INTO PRODUCT (
				NO, 
				CATEGORY,
				NAME, 
				PRICE, 
				CONTENT, 
				COLOR, 
				AMOUNT, 
				SIZE_SML, 
				STOCK, 
				COMPANY, 
				DISCOUNTRATE, 
				IMAGE, 
				WISH
			) VALUES (
				#{no},
				#{category}, 
				#{name}, 
				#{price}, 
				#{content}, 
				#{color}, 
				#{amount}, 
				#{sizeSml}, 
				#{stock}, 
				#{company}, 
				#{discountrate}, 
				#{image}, 
				#{wish}
			)
</insert>

<select id="selectProductBoardCount" resultType="_int">
		SELECT COUNT(*) FROM PRODUCT WHERE STATUS = 'Y'
	</select>

	<select id="selectAll" resultMap="productResultMap">
		SELECT NO,
			   CATEGORY, 
			   NAME, 
			   PRICE, 
			   CONTENT, 
			   COLOR,
               AMOUNT,
               SIZE_SML,
               STOCK,
               COMPANY,
               DISCOUNTRATE,
               STATUS,
               IMAGE,
               WISH
		FROM PRODUCT
		WHERE STATUS = 'Y'
		ORDER BY NO DESC
	</select>
	
	
	 <select id="selectProductBoardByNo" parameterType="_int" resultMap="productResultMap">
	 	SELECT NO,
			   CATEGORY, 
			   NAME, 
			   PRICE, 
			   CONTENT, 
			   COLOR,
               AMOUNT,
               SIZE_SML,
               STOCK,
               COMPANY,
               DISCOUNTRATE,
               STATUS,
               IMAGE,
               WISH
		FROM PRODUCT
		WHERE STATUS = 'Y' AND NO = #{no}
	 </select>
	 
	 <update id="updateProduct" parameterType="Product">
		UPDATE PRODUCT
		<trim prefix="SET" suffixOverrides=",">
			<if test="name != null">
				NAME=#{name},
			</if>
			<if test="category != null">
				CATEGORY=#{category},
			</if>
			<if test="price != null">
				PRICE=#{price},
			</if>
			<if test="content != null">
				CONTENT=#{content},
			</if>
			<if test="color != null">
				color=#{color},
			</if>
			<if test="amount != null">
				AMOUNT=#{amount},
			</if>
			<if test="sizeSml != null">
				SIZE_SML=#{sizeSml},
			</if>
			<if test="stock != null">
				STOCK=#{stock},
			</if>
			<if test="status != null">
				STATUS=#{status},
			</if>
			<if test="image != null">
				IMAGE=#{image},
			</if>
		
		</trim>			
		WHERE NO=#{no}
	</update>
	

	<delete id="updateProductStatus" parameterType="map">
		UPDATE PRODUCT 
		SET
			STATUS = #{status}
		WHERE NO = #{no}
</delete>


	<resultMap id="programResultMap" type="Program">
	<id property="no" column="NO"/>
	<result property="title" column="TITLE"/>
	<result property="thumb" column="THUMB"/>
	<result property="price" column="PRICE"/>
	<result property="category" column="CATEGORY"/>
	<result property="content" column="CONTENT"/>
	<result property="address" column="ADDRESS"/>
	<result property="applications" column="APPLICATIONS"/>
	<result property="maximum" column="MAXIMUM"/>
	<result property="status" column="STATUS"/>
	<result property="startDate" column="START_DATE"/>
	<result property="expiteDate" column="EXPIRE_DATE"/>
	</resultMap>
	
	<insert id="insertProgram" parameterType="Program">
	
	<selectKey resultType="_int" keyProperty="no" order="BEFORE">
	  SELECT SEQ_PG_NO.NEXTVAL FROM DUAL
	</selectKey>
	
		INSERT INTO PROGRAM (
					NO,
					TITLE,
					THUMB,
					PRICE,
					CATEGORY,
					CONTENT,
					ADDRESS,
					APPLICATIONS,
					MAXIMUM,
					STATUS,
					START_DATE,
					EXPIRE_DATE
			)VALUES(
					#{no},
					#{title},
					#{thumb},
					#{price},
					#{category},
					#{content},
					#{address},
					#{applications},
					#{maximum},
					#{status},
					#{startDate},
					#{expireDate},
			)	
	</insert>
	
	<select id="selectProgramBoardCount" resultType="_int">
			SELECT COUNT(*) FROM PROGRAM WHERE STATUS = 'Y'
	</select>	
		
	<select id="SelectAll" resultMap="programResultMap">
	SELECT NO,
	       TITLE,
	       THUMB,
	       PRICE,
	       CATEGORY,
	       CONTENT,
	       ADDRESS,
	       APPLICATIONS,
	       MAXIMUM,
	       STATUS,
	       START_DATE,
	       EXPIRE_DATE
	FROM  PROGRAM
	WHERE STATUS = 'Y'
	ORDER BY NO DESC
	</select>	
	
	<select id="selsctProgramBoardByNo" parameterType="_int" resultMap="programResultMap">
		SELECT NO,
		       TITLE,
		       THUMB,
		       PRICE,
		       CATEGORY,
		       CONTENT,
		       ADDRESS,
		       APPLICATIONS,
		       MAXIMUM,
		       STATUS,
		       START_DATE,
		       EXPIRE_DATE
		FROM  PROGRAM
		WHERE STATUS = 'Y' AND NO = #{no}
	</select>
	
	<select id="updateProgram" parameterType="Program">
		
	</select>
	
</mapper>


















